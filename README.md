# Скрипт для записи сообщений из чата в файл 
При запуске скрипта сообщения из чата будут выводиться в консоль
и одновременно записываться в указанный файл. Также можно отправлять в чат собственные сообщения.
## Пример работы скрипта:

```
[13.04.2024 12:21] Установлено соединение

[13.04.2024 12:21] Eva: Бога нет, поэтому я не могу верить в него. Как и в Санта-Клауса.
[13.04.2024 12:21] Vlad: Тебе нравится имя Коко?
[13.04.2024 12:21] Eva: Да, у меня есть друг, которого зовут Этан.

[13.04.2024 12:21] Соединение разорвано
```
```
Vlad: Как ты думаешь, какое время нужно встречаться, прежде, чем пожениться?
Eva: Пять лет.
Vlad: И как долго ты уже являешься роботом?
Kind maks3: А вот и новое  сообщение
Eva: Я не бот.
Vlad: А что ты?
```

## Запуск:

### 1. Копируем содержимое проекта себе в рабочую директорию
```
git clone https://github.com/MaksAnikeev/asincio_secret_chat.git
```
- listen-minechat.py - этот скрипт, который запускает сохранение сообщений из выбранного чата.
- write-to-minechat.py - этот скрипт позволяет зарегестрироваться в чате и отправлять в него сообщения.

### 2. Устанавливаем библиотеки:
```
pip install -r requirements.txt
```

### 3. Для хранения переменных окружения создаем файл .env:
```
touch .env
```
Записываем в .env адрес чата, с которого будем брать сообщения, порт для считывания сообщений
порт для отправки сообщений и папку/файл, в которой будет сохранятся переписка:
```pycon
HOST='minechat.dvmn.org'
PORT=5000
PORT_WRITER=5050
HISTORY_FILE="chat.txt"
```
Можно не создавать файл `.env`, а указать переменные окружения при запуске скрипта в командной строке
```pycon
python listen-minechat.py --host minechat.dvmn.org --port 5000 --history_file chat.txt

python write-to-minechat.py "А вот и новое сообщение" --host minechat.dvmn.org --port 5050 --token cf3392dc-fba1-11ee-aae7-0242ac110002
```
### 4. Запуск

Запускаем файл `listen-minechat.py` с указанием переменных окружения, или без них, тогда будут выставлены
переменные окружения по умолчанию (указаны выше):
```pycon
python listen-minechat.py
```
Для остановки работы нажмите в консоли `Ctrl C`

Запускаем файл `write-to-minechat.py` с указанием сообщения, которое хотим отправить в чат:
```pycon
python listen-minechat.py "А вот и новое сообщение"
```
Если не указан токен, то будет запущена процедура регистрации:
```pycon
Введите ваше имя для новой регистрации: XXXX

Ваш ник в чате:  Compassionate XXXX
Ваш токен для следующего захода в чат под этим ником:  4ae8dc8c-fc6c-11ee-aae7-0242ac110002
Запишите ваш token в .env TOKEN='4ae8dc8c-fc6c-11ee-aae7-0242ac110002',
 или используйте его при каждом следующем запуске скрипта
--token 4ae8dc8c-fc6c-11ee-aae7-0242ac110002
```
Если токен введен некорректно, то скрипт завершит свое выполнение без отправки сообщения в чат:
```pycon
Вы ввели неправильный токен, попробуйте еще раз или зарегестрируйтесь заново
Для новой регистрации токен должен быть пустым
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
